g_GAP = [1.5]
fanout = [0.5]
PrCOM = [0.3]
 
UB = max(Npre,Npost)
Xpre = linspace(1,UB,Npre)'*ones(1,Npost)
Xpost = (linspace(1,UB,Npost)'*ones(1,Npre))'
mask = rand(Npost,Npre)<PrCOM
mask = mask.*(1-eye(Npop))

IGAP(V1,V2) = (g_GAP/(PrCOM*Npop)).*sum(((V1*ones(1,size(V1,1)))'-(V2*ones(1,size(V2,1)))).*mask,2)
 
current => IGAP(IN,OUT)
 
